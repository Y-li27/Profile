<!doctype html>
<html lang="ja" xml:lang="ja">
<head>
<title>ｱｲﾄﾞﾙﾏｽﾀｰ ｼﾝﾃﾞﾚﾗｶﾞｰﾙｽﾞ </title>
<meta charset="UTF-8">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="-1">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="stylesheet" href='https://y-li27.github.io/Profile/12008305_img/pex.css' media="all">
<script src='https://y-li27.github.io/Profile/12008305_img/jquery-1.9.1.min.js'></script>
<script>
$(document).ready(function(){
  if (typeof newrelic === 'object' && typeof newrelic.setPageViewName === 'function') {
    newrelic.setPageViewName('/idolmaster/index.php/idol_story/generator_cjs/457/2/idol_gallery--idol_detail--d3e95e1ca3c7b346535ad23e8619ec7e--2/1');
  }
});
</script>
<meta name="authoring-tool" content="Adobe_Animate_CC">
<style>
body {
overflow: hidden;
}
#mbga-pf-footer {
display: none;
}
#codeigniter_profiler {
height: 1500px;
position: absolute;
display: none;
}
#animation_container canvas {
-webkit-tap-highlight-color:rgba(0,0,0,0);
}
#animation_container a {
-webkit-tap-highlight-color:rgba(0,0,0,0);
}
.loading {
position: absolute;
top: 50%;
width: 100%;
height: 100%;
margin-top: -55px;
}
.l_image {
position: relative;
display: block;
left: 3px;
margin: 35px auto 0;
width: 40px;
}
</style>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/createjs.min.js'></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/app_sound.js'></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/story_generator_n1.js' crossorigin="anonymous"></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/eff_flower_yellow.js' crossorigin="anonymous"></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/eff_flower_red.js' crossorigin="anonymous"></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/eff_question.js' crossorigin="anonymous"></script>
<script type='text/javascript'>var se_flg = 0, bgm_flg = 0, chrome_app_flg = 0, chrome_app_extension_id = 'dnacabmnfmejgfffmcehejcmiciinpej';</script><script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/app_sound.js'></script><link rel="stylesheet" type="text/css" href="https://y-li27.github.io/Profile/12008305_img/css/base.css" /></head>
<body style="margin:0px;">
<div id="animation_container" style="background-color:rgba(0, 0, 0, 0); width:100%; height: 1500px position: relative">
<canvas id="canvas" width="100%" height="" style="position: absolute; display: block; background-color:rgba(0, 0, 0, 0);"></canvas>
<div id="dom_overlay_container" style="pointer-events:none; overflow:hidden; width:240px; height:310px; position: absolute; left: 0px; top: 0px; display: block;"></div>
</div>
<script>
// -------------------------------------------------------------------------
// -------------------------------------------------------------------------
function handleFileLoadComplete(event) {
  var result = event.result;
}
function handleComplete() {
window.js_load_comp = true;
}
var load_js = new createjs.LoadQueue();
load_js.setMaxConnections(6);
// 1つのファイルを読み込み終わったら
load_js.addEventListener("fileload", handleFileLoadComplete);
// 全てのファイルを読み込み終わったら
load_js.addEventListener("complete", handleComplete);
// 読み込み開始
load_js.loadManifest(window.js_load_files);
var _effect_cnt = 3;
var image_server = "https://y-li27.github.io/Profile/12008305_img";
var base_url = "http://mobamas.net/idolmaster/";
window.im_cjs = window.im_cjs || {};
window.replace_images = [];
window.file_name = "story_generator_n1"; // createjs の本体ファイルを定義
window.dir_name = "image_sp/cjs/genechara/";
window.voice_manifest = {
'scene1': 'http://resource.mobamas.net/idolmaster/sound/9901077/bff0490aac35ce4e9ec884fa182d3593.mp4',
'scene2': 'http://resource.mobamas.net/idolmaster/sound/9901077/36e8e9f1b9df29405285d0da3d6499e2.mp4',
'scene3': 'http://resource.mobamas.net/idolmaster/sound/9901077/9ed930f58aecff56a26b1c852da63014.mp4',
'scene4': 'http://resource.mobamas.net/idolmaster/sound/9901077/ab5e7438223ac960a459842d4f9bc85a.mp4',
'scene5': 'http://resource.mobamas.net/idolmaster/sound/9901077/4c54482f0509013d9405d92bd13e5560.mp4',
'scene6': 'http://resource.mobamas.net/idolmaster/sound/9901077/6bc7e416039bf6683c5745cdeb98cb11.mp4',
'scene7': 'http://resource.mobamas.net/idolmaster/sound/9901077/c79a4cfff6f1589e072bfb9fd6ae80a8.mp4',
};
window._wrap_flag = 0;
window._ua = window.navigator.userAgent;
if (_ua.indexOf('iPhone') > 0) {
window._wrap_flag = 1;
} else if (_ua.indexOf('Android') && _ua.indexOf('6.0.1')) {
window._wrap_flag = 2;
}
window.replace_images = []
2
3
4
5
6
7
8
window.chara_replace_images = {};
// 一旦すべてのキャラ画像をダミーに差し替え
for(i = 1; i <= 20; i++) {
for (n = 1; n <= 13; n++) {
window.chara_replace_images[('c' + i + '_face' + n)] = 'image_sp/cjs/chara/no_face.png';
}
}
// 必要なキャラ画像を追加
window.chara_replace_images['c1_face1'] = 'image_sp/cjs/chara/other/10201.png';
window.chara_replace_images['c1_face1'] = 'image_sp/cjs/chara/other/10201.png';
window.chara_replace_images['c1_face2']  = 'image_sp/cjs/chara/other/10201_2.png';
window.chara_replace_images['c1_face1'] = 'image_sp/cjs/chara/other/10201.png';
window.chara_replace_images['c1_face5']  = 'image_sp/cjs/chara/other/10201_5.png';
window.chara_replace_images['c1_face6']  = 'image_sp/cjs/chara/other/10201_6.png';
window.chara_replace_images['c1_face4']  = 'image_sp/cjs/chara/other/10201_4.png';
window.chara_replace_images['c1_face5']  = 'image_sp/cjs/chara/other/10201_5.png';
window.chara_replace_images['c1_b'] = 'image_sp/cjs/chara/other/10201_b.png';
window.im_cjs.bg_frame_info = {
'00001' : 0,
};
window.bg_replace_images = {};
window.bg_replace_images['bg1'] = '00001';
window.bg_replace_images['bg2'] = '_nobg';
window.bg_replace_images['bg3'] = '_nobg';
window.bg_replace_images['bg4'] = '_nobg';
window.bg_replace_images['bg5'] = '_nobg';
window.bg_replace_images['bg6'] = '_nobg';
window.bg_replace_images['bg7'] = '_nobg';
window.bg_replace_images['bg8'] = '_nobg';
window.bg_replace_images['bg9'] = '_nobg';
window.bg_replace_images['bg10'] = '_nobg';
window.op_bg_replace_images = {};
window.im_cjs.effect_frame_info = {
'flower_yellow' : 0,
'flower_red' : 1,
'question' : 2,
};
window.im_cjs.chara_frame_info = {"10201":{"id":1,"hash_id":"","name":"\u52a0\u84ee","offsetx":"0","offsety":"0","other_flg":"1","face":["1","1","2","1","5","6","4","5"]}};
window.im_cjs.title_name = '事務所' || 'no_title';
window.im_cjs.event_type = '3' || 0;
window.im_cjs.jump_url = 'https://y-li27.github.io/Profile/'; // createjsの演出が全て終了した場合の飛び先urlの定義
window.im_cjs.chara_num = 1;
window.im_cjs.voice_flag = 1;// 音声再生フラグを定義
</script>
<script>
(function(){
window.exportRoot;
var canvas, stage, anim_container, dom_overlay_container, fnStartAnimation, flag;
var manifest=[];
var manifestCount = 1;
var _child_num = [];
var loadCount = 0;
var lib;
var lib_supporter = [];
window.init = function init() {
// 高さを設定する
$('body').css('height', window.innerHeight);
canvas = document.getElementById("canvas");
anim_container = document.getElementById("animation_container");
dom_overlay_container = document.getElementById("dom_overlay_container");
var comp=AdobeAn.getComposition(window.file_name);
lib=comp.getLibrary();
var comp_eff_supporter =[];
var effect_list = ["flower_yellow","flower_red","question"];
for(var n = 0, len = _effect_cnt; n < len; n++) {
comp_eff_supporter[n] = AdobeAn.getComposition('eff_' + effect_list[n]);
if (comp_eff_supporter[n]) {
lib_supporter[n] = comp_eff_supporter[n].getLibrary();
}
}
createjs.MotionGuidePlugin.install();
var loader = new createjs.LoadQueue(false);
loader.setMaxConnections(6);
loader.installPlugin(createjs.Sound);
loader.addEventListener("fileload", function(evt){ handleFileLoad(evt,comp) });
loader.addEventListener("complete", function(evt){ handleComplete(evt,comp) });
if (comp_eff_supporter[0]) {
loader.addEventListener("fileload", function(evt){ handleFileLoad(evt,comp_eff_supporter[0]) });
loader.addEventListener("complete", function(evt){ handleComplete(evt,comp_eff_supporter[0]) });
}
if (comp_eff_supporter[1]) {
loader.addEventListener("fileload", function(evt){ handleFileLoad(evt,comp_eff_supporter[1]) });
loader.addEventListener("complete", function(evt){ handleComplete(evt,comp_eff_supporter[1]) });
}
if (comp_eff_supporter[2]) {
loader.addEventListener("fileload", function(evt){ handleFileLoad(evt,comp_eff_supporter[2]) });
loader.addEventListener("complete", function(evt){ handleComplete(evt,comp_eff_supporter[2]) });
}
if (comp_eff_supporter[3]) {
loader.addEventListener("fileload", function(evt){ handleFileLoad(evt,comp_eff_supporter[3]) });
loader.addEventListener("complete", function(evt){ handleComplete(evt,comp_eff_supporter[3]) });
}
var new_manifest = [];
for (var i = 0, len = lib.properties.manifest.length; i < len; i++) {
var _img_path = window.dir_name + lib.properties.manifest[i].src;
var _prefix = lib.properties.manifest[i].id.replace(window.file_name+'_','');
// 背景
if (window.bg_replace_images[_prefix]) {
_img_path = '2Fbg00001_wide.jpg';
}
// op背景
if (window.op_bg_replace_images[_prefix]) {
_img_path = '2Fbg00001_wide.jpg';
}
if (window.chara_replace_images[_prefix]) {
_img_path = window.chara_replace_images[_prefix];
}
if (window.replace_images[_prefix]) {
_img_path = window.replace_images[_prefix];
}
new_manifest[i] = {
'type': 'image',
'src': window.image_server + '?url=' + encodeURIComponent(window.base_url + _img_path),
'id': lib.properties.manifest[i].id,
'crossOrigin': 'Anonymous'
}
}
//console.warn("manifest", new_manifest);
loader.loadManifest(new_manifest);
}
function handleFileLoad(evt, comp) {
var images=comp.getImages();
if (evt && (evt.item.type == "image")) { images[evt.item.id] = evt.result; }
}
function handleComplete(evt,comp) {
// // //This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
// var lib=comp.getLibrary();
// var ss=comp.getSpriteSheet();
// var queue = evt.target;
// var ssMetadata = lib.ssMetadata;
// for(i=0; i<ssMetadata.length; i++) {
// ss[ssMetadata[i].name] = new createjs.SpriteSheet( { "images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames } )
// }
// // 
loadCount++;
// /console.warn(loadCount, _child_num.length , _effect_cnt, (_child_num.length + _effect_cnt));
if (loadCount < (_child_num.length + _effect_cnt)) {
return;
}
if (flag) {
return;
}
flag = true;
var _eff_i = 0;
var _chara_i = 0;
for (var i in lib_supporter) {
var _no = parseInt(i) + 1;
if (lib_supporter[i] && (lib_supporter[i].properties.id.match(/eff_/) && lib_supporter[i].properties.id.match(/eff_/).length > 0)) {
_eff_i++;
lib['replace_effect' + _eff_i] = lib_supporter[i].replace;
}
}
/* createjs本体を自動挿入するように変数を入れています。 */
exportRoot = new lib[window.file_name]();
/* -------------------------------------------- */
stage = new lib.Stage(canvas);
//Registers the "tick" event listener.
fnStartAnimation = function() {
stage.addChild(exportRoot);
createjs.Ticker.framerate = 12;
createjs.Ticker.addEventListener("tick", stage);
}
//Code to support hidpi screens and responsive scaling.
function makeResponsive(isResp, respDim, isScale, scaleType) {
var lastW, lastH, lastS=1;
window.addEventListener('resize', resizeCanvas);
function resizeCanvas() {
var w = lib.properties.width, h = lib.properties.height;
var iw = window.innerWidth, ih=window.innerHeight;
var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;
if(isResp) {
if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {    
sRatio = lastS;
}
else if(!isScale) {
if(iw<w || ih<h)
sRatio = Math.min(xRatio, yRatio);
}
else if(scaleType==1) {
sRatio = Math.min(xRatio, yRatio);
}
else if(scaleType==2) {
sRatio = Math.max(xRatio, yRatio);
}
}
canvas.width = w*pRatio*sRatio;
canvas.height = h*pRatio*sRatio;
canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';
canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
stage.scaleX = pRatio*sRatio;
stage.scaleY = pRatio*sRatio;
lastW = iw; lastH = ih; lastS = sRatio;
stage.tickOnUpdate = false;
stage.update();
stage.tickOnUpdate = true;
$('#animation_container').css('margin-top', (window.innerHeight - $('#animation_container').innerHeight()) / 2 + "px");
}
resizeCanvas();
}
makeResponsive(true,'width',true,1);
AdobeAn.compositionLoaded(lib.properties.id);
fnStartAnimation();
$('.loading').hide();
exportRoot.skip_btn.visible = false;
}
function playSound(id, loop) {
return createjs.Sound.play(id, createjs.Sound.INTERRUPT_EARLY, 0, 0, loop);
}
init();
})();
var keyup_func = function(e){
$(window).off('keydown');
if (e.keyCode == 13) {
if (typeof exportRoot.toggle_flag === 'undefined' || exportRoot.toggle_flag == 'in'){
if ((exportRoot.scene_list.length - 1) <= exportRoot.story_point) {
console.log("end_story");
if (exportRoot.event_type == 0 || exportRoot.event_type == 1) {
window.location.href = exportRoot.back_url;
return;
}
if (exportRoot.scene_name == 'end') {
window.location.href = exportRoot.back_url;
} else {
exportRoot.gotoAndPlay('end');
}
exportRoot.scene_name = 'end';
} else {
switch(exportRoot.scene_name) {
case 'title':
exportRoot.scene_name = 'main';
exportRoot.gotoAndStop('main');
exportRoot._u.scene_init();
if(window.im_cjs.voice_flag) {
window.im_cjs.voice_play();
window.im_cjs.load_voice("scene" + (exportRoot.story_point + 2));
exportRoot.loader.visible = true;
exportRoot.addEventListener('tick', exportRoot._u._ticker);
exportRoot.stop();
}
e.stopPropagation();
break;
case 'main':
exportRoot.story_point++;
for (var i = 0; i < 7; i++) {
if (exportRoot.chara_display_info[exportRoot._all_pos[i]]) {
exportRoot['effect_target_' + exportRoot._all_pos[i]].visible = false;
}
}
exportRoot._u.scene_init();
if(window.im_cjs.voice_flag) {
window.im_cjs.voice_play();
if (exportRoot.scene_list.length > (exportRoot.story_point+1)) {
window.im_cjs.load_voice("scene" + (exportRoot.story_point + 2));
exportRoot.loader.visible = true;
exportRoot.addEventListener('tick', exportRoot._u._ticker);
exportRoot.stop();
}
}
e.stopPropagation();
break;
}
}
} else {
exportRoot.toggle_flag = 'in';
exportRoot.win.gotoAndPlay('in');
}
}
$(window).off('keydown');
setTimeout(function() {
$(window).one('keydown', keyup_func);
}, 300);
return false;
};
$(window).one('keydown', keyup_func);
</script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/boombox.min.js'></script>
<script type='text/javascript' src='https://y-li27.github.io/Profile/12008305_img/voice_cjs.js'></script>
<div id="mbga-pf-footer">
<div class="mbga-pf-footer-container odd-lines mbga-pf-footer-white">
<ul>
	<li class="mbga-pf-footer-list">
		<div class="mbga-pf-fotter-content">
			<a class="mbga-pf-footer-arrow" href="http://sp.mbga.jp/_grp_view?g=32095227">
				<span class="mbga-pf-footer-caption">公式サークル</span>
			</a>
		</div>
	</li>
</ul>
</div>
<div id="mbga-pf-footer-navbar">
	<ul class="mbga-pf-box-h">
		<li id="mbga-pf-footer-navbar-icon-grid" class="mbga-pf-footer-li">
			<a class="mbga-pf-footer-a mbga-pf-footer-home-w" href="http://sp.mbga.jp/?_from=globalfooter">
				<span class="mbga-pf-footer-txt">ホーム</span>
			</a>
		</li>
		<li id="mbga-pf-footer-navbar-icon-mypage" class="mbga-pf-footer-li">
			<a class="mbga-pf-footer-a mbga-pf-footer-mypage-w" href="http://sp.mbga.jp/_my0?_from=globalfooter">
				<span class="mbga-pf-footer-txt">マイページ</span>
			</a>
		</li>
		<li id="mbga-pf-footer-navbar-icon-mygame" class="mbga-pf-footer-li">
			<a class="mbga-pf-footer-a mbga-pf-footer-mygame-w" href="http://sp.mbga.jp/_game_my_top?_from=globalfooter">
				<span class="mbga-pf-footer-txt">マイゲーム</span>
			</a>
		</li>
		<li id="mbga-pf-footer-navbar-icon-notification" class="mbga-pf-footer-li">
			<a class="mbga-pf-footer-a mbga-pf-footer-game-w" href="http://sp.mbga.jp/_game_top?_from=globalfooter">
				<span class="mbga-pf-footer-txt">ゲーム</span>
			</a>
		</li>
	</ul>
</div>
<script type="text/javascript" charset="UTF-8">
(function() {
document.addEventListener('DOMContentLoaded', function() {
	var list = document.getElementsByClassName('mbga-pf-footer-li');
	var i = 0, l = list.length;
	for (; i < l; i++) {
		var elem = list[i];
		elem.addEventListener('touchstart', function(e) {
			e.currentTarget.className = e.currentTarget.className.replace(/$/, ' mbga-pf-tapped');
		});
		elem.addEventListener('touchend', function(e) {
			e.currentTarget.className = e.currentTarget.className.replace(/ mbga-pf-tapped/, '');
		});
		elem.addEventListener('touchmove', function(e) {});
	}
});
})();
</script>
</div>
</body>
</html>
